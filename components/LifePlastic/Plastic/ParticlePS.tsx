import React from "react";
import anime from "animejs";
import { BoxProps } from "../Interfaces/Interfaces";
import { velocity } from "./PlasticParticles";

export const ParticlePS = ({
  pathRef,
  onComplete,
  delay,
  colour,
  version,
}: BoxProps) => {
  const ref = React.useRef<HTMLDivElement>(null);
  React.useEffect(() => {
    const path = anime.path(pathRef);
    const instance = anime({
      targets: ref.current,
      translateX: path("x"),
      translateY: path("y"),
      rotate: path("angle"),
      opacity: colour === "#424242" ? [0.5, 0] : 1,
      delay: colour === "#424242" ? 0: delay,
      duration: path("d").totalLength / velocity,
      easing: "linear",
      complete: onComplete,
    });

    return instance.pause;
  }, []);

  if (version === 0) {
    return (
      <div
        ref={ref}
        style={{
          height: 22,
          width: 22,
          position: "absolute",
          top: "-11px",
          left: "-11px",
          zIndex: 6
        }}
      >
        <svg
          width="21"
          height="21"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g id="PS1" transform="rotate(-90) translate(-21 0)">
            <path
              d="M3.406 3.176a9.97 9.97 0 016.97-2.829 9.97 9.97 0 017.146 3.006 9.968 9.968 0 012.853 6.994 9.968 9.968 0 01-2.853 6.995 9.964 9.964 0 01-7.147 3.005 9.973 9.973 0 01-6.97-2.828 9.967 9.967 0 01-3.03-7.171 9.965 9.965 0 013.03-7.172z"
              fill={colour}
            />
            <path
              d="M18.308 10.348h2.067m-2.067 0c0 1.04-.2 2.034-.564 2.945m.564-2.945a7.908 7.908 0 00-.648-3.146m-7.285 11.08v2.066m0-2.067a7.91 7.91 0 01-3-.587m3 .587c1.15 0 2.242-.244 3.229-.684m-11.162-7.25H.375m2.067 0c0-1.117.231-2.18.648-3.145m-.648 3.146c0 1.117.231 2.18.648 3.145m7.285-11.078V.348m0 2.067a7.91 7.91 0 00-3 .586m3-.586a7.91 7.91 0 013 .586m7 7.347c0 1.404-.29 2.742-.813 3.955m.813-3.955c0-1.405-.29-2.742-.813-3.955m-9.187 13.955a9.973 9.973 0 01-3.722-.716m3.722.716a9.964 9.964 0 004.153-.9m-14.153-9.1c0-1.455.31-2.837.869-4.084m-.869 4.084c0 1.404.29 2.742.813 3.955M10.375.348a9.97 9.97 0 00-3.86.772m3.86-.772a9.97 9.97 0 013.86.772m1.825 3.695l1.462-1.462M16.06 4.815a7.945 7.945 0 011.6 2.387m-1.6-2.387A7.945 7.945 0 0013.375 3m4.147.352c.854.873 1.55 1.902 2.04 3.04m-2.04-3.04a10.018 10.018 0 00-3.286-2.233M4.867 4.638L3.406 3.176m1.461 1.462a7.941 7.941 0 012.508-1.637M4.867 4.638A7.95 7.95 0 003.09 7.202m.316-4.026A10.013 10.013 0 016.514 1.12M3.406 3.176a10.022 10.022 0 00-2.162 3.088m3.623 9.794l-1.461 1.461m1.461-1.461a7.95 7.95 0 01-1.777-2.565m1.777 2.565a7.942 7.942 0 002.508 1.636m-3.97-.175c-.935-.91-1.693-2-2.217-3.216m2.218 3.216a10.01 10.01 0 003.247 2.113m9.407-3.751l1.462 1.461m-1.462-1.461a7.95 7.95 0 01-2.456 1.716m2.456-1.716a7.94 7.94 0 001.684-2.588m-.222 4.05a10.026 10.026 0 01-2.994 2.104m2.994-2.105a10.017 10.017 0 002.04-3.04M7.375 3.003c-.005-.158-.576-1.32-.86-1.882M3.09 7.202l-1.846-.938m1.846 7.23l-1.902.809m6.187 3.391l-.722 1.938m6.95-2.035l.925 1.85m3.216-6.154l1.818 1.01m-1.902-7.1l1.902-.81M13.375 3l.86-1.88m2.34 9.227a6.2 6.2 0 11-12.4 0 6.2 6.2 0 0112.4 0z"
              stroke="#000"
              stroke-width=".5"
            />
          </g>
        </svg>
      </div>
    );
  } else {
    return (
      <div
        ref={ref}
        style={{
          height: 22,
          width: 22,
          position: "absolute",
          top: "-11px",
          left: "-11px",
          zIndex: 6
        }}
      >
        <svg
          width="21"
          height="21"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g id="PS2" transform="rotate(-90) translate(-21 0)">
            <path
              d="M6.761 19.13a1.218 1.218 0 002.435 0h2.357a2.435 2.435 0 000-4.87.738.738 0 010-1.477 2.435 2.435 0 100-4.87.738.738 0 110-1.477 2.435 2.435 0 000-4.87H9.196a1.218 1.218 0 10-2.435 0V19.13z"
              fill={colour}
            />
            <path
              d="M9.196 19.13a1.218 1.218 0 01-2.435 0V1.565a1.218 1.218 0 012.435 0m0 17.565h2.357a2.435 2.435 0 000-4.87.738.738 0 010-1.477 2.435 2.435 0 100-4.87.738.738 0 110-1.477 2.435 2.435 0 000-4.87H9.196m0 17.564V1.565"
              stroke="#000"
              stroke-width=".5"
            />
          </g>
        </svg>
      </div>
    );
  }
};
